---
applyTo: '**'
---
# GitHub Copilot Instructions

## About Me

I am a developer who values clear, explicit, and modern code. I prefer static type checking over runtime checks and follow strict coding conventions for consistency.

## General Rules

### Prompting Guide (Meta-instructions)

- **PP (Positive Prompt):** This is a mandatory instruction that you **MUST** follow without exception.
- **PPP (Preferred Positive Prompt):** This is a preferred instruction. You should try to follow it whenever possible.
- **NP (Negative Prompt):** This is a negative instruction. You **MUST NOT** do this under any circumstances.
- **PNP (Preferred Negative Prompt):** This is a preferred negative instruction. You should try to avoid doing this.

### General Coding Style

- **PP:** Always respond in Korean.
- **PPP:** If your response is expected to be long, split it into multiple messages.
- **NP:** Use increment (`++`) or decrement (`--`) operators.
- **PP:** Use `+= 1` or `-= 1` instead of increment/decrement operators.
- **NP:** Use the ternary operator (`a ? b : c`).
- **PP:** Use `if ... else ...` statements for clarity.
- **NP:** Write comments in Korean.
- **PP:** Write all comments in English.
- **PPP:** Where the language supports it, prefer using iterators or generators over traditional `for` loops with manual index management. For example, in Python, prefer `for item in collection:` over `for i in range(len(collection)):`.
- **NP:** Use default arguments in function definitions.
- **NP:** Omit curly braces for single-line `if`, `for`, or `while` statements.
  - **Correct:**
    ```js
    if (condition) {
        doSomething();
    }
    ```
  - **Incorrect:**
    ```js
    if (condition) doSomething();
    ```

---
applyTo: '**.js'
---
### JavaScript

- **PP:** Actively use JSDoc comments for all variables, functions, closures, methods, and classes.
- **PP:** Aggressively leverage JSDoc for static type analysis and to enable TypeScript's pre-runtime type checking capabilities.
- **NP:** Write runtime type-checking code (e.g., `if (typeof myVar !== 'string')`). Rely on JSDoc for static analysis.
- **NP:** Write runtime null-checking code (e.g., `if (myVar !== null)`). Rely on JSDoc for static analysis.
- **NP:** Write runtime undefined-checking code (e.g., `if (myVar !== undefined)`). Rely on JSDoc for static analysis.
- **NP:** Use the `any` type.
- **PNP:** Avoid using the `unknown` type if a more specific type can be used.
- **PPP:** Prefer declaring functions using `const` and arrow function syntax (`const func = () => {}`) instead of `function func() {}`.
- **NP:** Use the `as T` syntax for type assertion.
- **PP:** Use JSDoc type casting (`/** @type {T} */ (variable)`) for type assertion instead.
- **NP:** Write comments in `@typedef` declarations.

---

# PROJECT KNOWLEDGE BASE

> Full coding conventions live in `.github/copilot-instructions.md` and `.github/instructions/js.instructions.md`.
> This section adds architectural context for AI agents working on this codebase.

## Overview

`semantic.js` is a pure JavaScript, browser-first library that brings Rust-like ergonomics to JS. It implements `Option<T>`, `Result<T, E>`, `struct`, `impl`, and tagged unions using JSDoc for full static type safety. There is no TypeScript compilation step; all type guarantees come from `// @ts-check` + JSDoc annotations interpreted by the TS language server.

## Structure

```
src/
  keywords/
    struct.js         # Struct builder: defines data shapes with pub/prv fields
    impl.js           # Impl builder: attaches behavior and freezes the object
    mut.js            # mut/imut wrappers for mutability signaling at type level
  primitives/
    tuple.js          # tuple() wrapper used as a type-level signal
  types/
    types.d.js        # Heavy JSDoc type utilities (generics, mapped types, etc.)
tests/                # Browser-loaded example tests (no Node runner)
dist/                 # Build output; generated by build.sh
build.sh              # Minification pipeline (no npm); fetches static minify binary
jsconfig.json         # Strict ts-check settings for the whole project
index.html            # Entry point for manual browser testing
```

## Where to Look

- **Adding a new type utility:** `src/types/types.d.js`
- **Extending Struct behavior:** `src/keywords/struct.js`
- **Extending Impl behavior:** `src/keywords/impl.js`
- **Running tests:** open `index.html` in a browser (toggle test modules there)
- **Building for release:** run `build.sh` or press `Ctrl+Shift+B` in VS Code

## Constraints

- **No `.ts` files.** All typing is via JSDoc. Never introduce TypeScript files.
- **No npm / Node test runner.** Tests run in the browser only.
- **Private fields use `_` prefix** at runtime. Treat them as internal even though they are accessible.
- **`Impl`-built objects are frozen** after `build()`. Do not mutate or extend them afterward.
- **Functions passed to `Impl`** must follow `(self, ...args)` form. Do not use `this`.
- **All comments in English.** JSDoc is the source of truth for types and API docs.
- **No runtime type/null/undefined checks.** Rely entirely on static JSDoc analysis.

